'''
Count number of loops in an assembly source code file
'''
import ConfigParser
import csv
import os
import string
import sys


#Helpter function: update dictionary [opcode, count]
def dictadd(dictionary,key):
    if key != "":
        if key in dictionary:
            dictionary[key] += 1
        else:
            dictionary[key] = 1


path = Config.get("Train","feature_save")
path_out = Config.get("Train","feature_save")
output = []

count = 0
with (open(os.path.join(path,"loop_range.csv"))) as f:
	for line in f:
		to_add = {}
		count += 1
		line = line.split(",")
		print("Counting loops: "+ line[0]+" "+str(count))
		output.append(len(line[1:]))
		
with open(os.path.join(path_out,"loop_count.csv"),"wb+") as f:
	w = csv.writer(f)
	for item in output:
		w.writerow([item])
